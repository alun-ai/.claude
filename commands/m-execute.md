# Phased Implementation Execution: Three-Agent Development Workflow

**Target:** $ARGUMENTS (Default: continue from current phase or pending findings)

**Scope:** Execute phased implementation plans through orchestrated three-agent development workflow

**Context Extension:** For analysis and execution, always use "ultrathink" mode to allocate maximum computational budget.

## Overview

Orchestrates a sophisticated three-agent development workflow that executes phased implementation plans generated by m-explore. The system focuses on specific phases, loads only relevant context, and tracks progress through discrete, actionable phases rather than re-reading large documents.

**Key Benefits:**
- **Phased Execution**: Processes one phase at a time with focused context
- **Progress Tracking**: Real-time completion status via JSON tracker
- **Agent Specialization**: Each agent optimized for specific roles
- **Focused Context**: Loads only current phase scope, avoiding information overload
- **Iterative Refinement**: Individual phases can be updated independently

## Command Usage

### Basic Phase Execution
```bash
# Execute from findings directory (automatically detects next phase)
/m-execute --from-findings .claude/findings/auth-system/

# Execute specific phase
/m-execute --phase .claude/findings/auth-system/02-architecture-phase.md

# Resume current phase from tracker
/m-execute --resume-phase

# Continue from previous discussion (legacy mode)
/m-execute "implement user authentication"
```

### Advanced Phase Management
```bash
# Start from specific phase number
/m-execute --from-findings .claude/findings/auth-system/ --start-phase 02

# Execute multiple phases in sequence
/m-execute --from-findings .claude/findings/auth-system/ --phases 01-03

# Skip to implementation phase
/m-execute --phase .claude/findings/auth-system/03-implementation-phase.md --force-start

# Resume with specific focus
/m-execute --resume-phase --focus security
```

## Three-Agent Architecture

### Agent O (Orchestrator)
**Role:** Phase coordination and strategic decision making
**Responsibilities:**
- Parse phase files and extract tasks with acceptance criteria
- Use `mcp__sequential-thinking__sequentialthinking` for complex phase analysis
- Coordinate between Developer and Reviewer agents within phase scope
- Update phase tracker with completion status in real-time
- Make final decisions on phase completion with evidence-based reasoning
- Manage phase transitions and dependency validation

### Agent D (Developer)
**Role:** Phase-specific implementation and iteration
**Responsibilities:**
- Implement tasks defined in current phase file
- Address review feedback within phase scope
- Maintain code quality during phase iterations
- Commit incremental progress with phase-specific messages
- Focus on phase deliverables rather than broader architecture
- Mark phase tasks as completed in tracker

### Agent R (Reviewer)
**Role:** Phase quality assessment and validation
**Responsibilities:**
- Review implementation against phase acceptance criteria
- Use `mcp__sequential-thinking__sequentialthinking` for systematic phase analysis
- Verify phase validation criteria are met
- Provide phase-specific feedback with external validation
- Approve or reject phase completion with detailed reasoning
- Ensure phase deliverables meet quality standards

## Phased Execution Workflow

### Phase 1: Phase Context Loading
1. **Phase Discovery**: Identify target phase from arguments or tracker
2. **Prerequisites Check**: Validate previous phases completed
3. **Task Extraction**: Parse phase file for tasks and acceptance criteria
4. **Context Setup**: Load only relevant context for current phase
5. **Agent Briefing**: Provide focused scope to all three agents

### Phase 2: Strategic Phase Planning (Agent O)
1. **Phase Analysis**: Use sequential thinking to understand phase scope
2. **Task Prioritization**: Order tasks based on dependencies
3. **Resource Validation**: Ensure tools and access available
4. **Success Metrics**: Define clear completion criteria
5. **Development Plan**: Create phase-specific implementation plan

### Phase 3: Phase Implementation (Agent D)
1. **Task Execution**: Implement tasks according to phase plan
2. **Progress Tracking**: Update tracker as tasks complete
3. **Quality Maintenance**: Ensure code quality during implementation
4. **Deliverable Creation**: Generate phase-specific outputs
5. **Completion Signaling**: Signal phase completion to Orchestrator

### Phase 4: Phase Validation (Agent R)
1. **Acceptance Criteria Review**: Verify all criteria met
2. **Quality Assessment**: Ensure phase deliverables meet standards
3. **Validation Testing**: Run phase-specific validation steps
4. **Feedback Generation**: Provide specific, actionable feedback
5. **Approval Decision**: Accept or reject phase completion

### Phase 5: Phase Completion (Agent O)
1. **Results Evaluation**: Assess phase completion against criteria
2. **Tracker Update**: Mark phase as completed with timestamps
3. **Handoff Preparation**: Prepare context for next phase
4. **Decision Making**: Proceed to next phase or iterate current
5. **Progress Report**: Generate phase completion summary

## Phase File Processing

### Task Extraction
The system automatically extracts:
- **Checkboxes**: `- [ ]` items as actionable tasks
- **Acceptance Criteria**: Validation requirements
- **Prerequisites**: Dependencies that must be met
- **Deliverables**: Expected outputs and artifacts
- **Notes**: Implementation guidance and gotchas

### Progress Tracking
Real-time updates to phase tracker:
- **Task Completion**: Individual task status updates
- **Phase Status**: pending → in_progress → completed
- **Timestamps**: Start and completion times
- **Task Counts**: Completed vs. total tasks
- **Overall Progress**: Percentage across all phases

### Validation Criteria
Each phase defines specific validation criteria:
- **Functional Requirements**: Feature completeness
- **Quality Gates**: Code quality standards
- **Testing Requirements**: Test coverage and validation
- **Documentation**: Required documentation updates
- **Dependencies**: Handoff requirements for next phase

## Command Options

### Execution Modes
```yaml
phase_execution:
  --from-findings: "Execute from findings directory structure"
  --phase: "Execute specific phase file"
  --resume-phase: "Resume current phase from tracker"
  --start-phase: "Start from specific phase number"
  --phases: "Execute range of phases (e.g., 01-03)"

workflow_control:
  --force-start: "Start phase ignoring prerequisites"
  --skip-validation: "Skip phase validation steps"
  --quick-cycle: "Fast iteration for simple phases"
  --research-intensive: "Extended research for complex phases"

progress_management:
  --reset-phase: "Reset current phase to pending"
  --mark-complete: "Mark phase as completed manually"
  --update-tracker: "Update phase tracker without execution"
  --show-progress: "Display current progress status"
```

### Focus Options
```yaml
focus_areas:
  --focus security: "Emphasize security validation"
  --focus performance: "Performance optimization focus"
  --focus testing: "Testing and quality assurance"
  --focus documentation: "Documentation and knowledge sharing"
```

## Phase Tracker Integration

### Tracker Structure
```json
{
  "topic": "feature-name",
  "current_phase": "02-architecture-phase",
  "status": "in_progress",
  "phases": [
    {
      "id": "01-research-phase",
      "status": "completed",
      "completed_tasks": 5,
      "total_tasks": 5,
      "completion_date": "2024-01-15T11:00:00Z"
    },
    {
      "id": "02-architecture-phase",
      "status": "in_progress",
      "completed_tasks": 2,
      "total_tasks": 4,
      "started_date": "2024-01-15T11:00:00Z"
    }
  ]
}
```

### Tracker Operations
- **Phase Start**: Update status to in_progress, set started_date
- **Task Completion**: Increment completed_tasks counter
- **Phase Completion**: Set status to completed, add completion_date
- **Progress Calculation**: Update overall progress percentage
- **Phase Transition**: Move to next phase, validate prerequisites

## Integration Features

### Git Workflow Integration
- **Phase Commits**: Commit messages include phase context
- **Branch Management**: Optional phase-specific branches
- **Change Tracking**: Track modifications per phase
- **Merge Strategy**: Clean merge when phase completes

### Build Verification
- **Phase Validation**: Run builds during phase completion
- **Test Execution**: Phase-specific test suites
- **Quality Gates**: Enforce quality standards per phase
- **Deployment Preparation**: Phase-specific deployment steps

### Documentation Updates
- **Phase Documentation**: Update docs as phases complete
- **API Documentation**: Keep API docs current
- **Knowledge Base**: Maintain implementation knowledge
- **Decision Records**: Track architectural decisions

## Workflow Examples

### Authentication System Implementation
```bash
# Generate phased plan
/m-explore "implement user authentication system"

# Execute research phase
/m-execute --from-findings .claude/findings/auth-system/

# Continue with architecture phase
/m-execute --resume-phase

# Jump to implementation
/m-execute --phase .claude/findings/auth-system/03-implementation-phase.md
```

### Bug Fix with Validation
```bash
# Generate fix plan
/m-explore "fix user login timeout issue"

# Execute fix with testing focus
/m-execute --from-findings .claude/findings/login-fix/ --focus testing

# Validate fix completion
/m-execute --phase .claude/findings/login-fix/04-testing-phase.md
```

### Performance Optimization
```bash
# Generate optimization plan
/m-explore "optimize database query performance"

# Execute with performance focus
/m-execute --from-findings .claude/findings/db-optimization/ --focus performance

# Resume from current phase
/m-execute --resume-phase
```

## Output Format

### Phase Execution Report
```json
{
  "findings_folder": ".claude/findings/auth-system/",
  "current_phase": {
    "id": "02-architecture-phase",
    "name": "Architecture Phase",
    "status": "completed",
    "tasks_completed": 4,
    "tasks_total": 4,
    "completion_time": "2024-01-15T12:00:00Z"
  },
  "agent_cycles": [
    {
      "cycle": 1,
      "phase": "02-architecture-phase",
      "tasks_completed": ["design_user_model", "create_auth_service"],
      "developer_commits": ["a1b2c3d"],
      "review_result": "approved",
      "validation_passed": true
    }
  ],
  "next_phase": "03-implementation-phase",
  "overall_progress": 45,
  "completion_estimate": "2024-01-15T16:00:00Z"
}
```

### Progress Summary
- **Current Phase**: Active phase with progress details
- **Completed Tasks**: List of finished tasks with timestamps
- **Remaining Work**: Upcoming tasks and estimates
- **Quality Status**: Validation results and quality metrics
- **Next Actions**: Recommended next steps

## Error Handling

### Common Issues
- **Missing Prerequisites**: Validates and reports missing dependencies
- **Phase File Errors**: Handles malformed or missing phase files
- **Tracker Corruption**: Repairs or recreates tracker files
- **Agent Conflicts**: Resolves disagreements between agents
- **Build Failures**: Handles compilation and test failures

### Recovery Strategies
- **Phase Reset**: Reset problematic phase to pending
- **Tracker Rebuild**: Recreate tracker from phase files
- **Context Reload**: Refresh phase context and try again
- **Manual Intervention**: Pause for manual resolution
- **Fallback Mode**: Continue with reduced functionality

## Performance Optimization

### Context Management
- **Focused Loading**: Load only current phase context
- **Memory Efficiency**: Avoid loading entire project history
- **Selective Updates**: Update only relevant documentation
- **Cache Strategy**: Cache phase results for faster iteration

### Agent Efficiency
- **Parallel Processing**: Run independent operations in parallel
- **Smart Scheduling**: Optimize agent interaction timing
- **Resource Monitoring**: Track and optimize resource usage
- **Batch Operations**: Group similar operations for efficiency

## Best Practices

### Phase Execution
1. **Clear Prerequisites**: Ensure all dependencies met before starting
2. **Focused Scope**: Stay within phase boundaries
3. **Quality Gates**: Meet all validation criteria before proceeding
4. **Documentation**: Keep phase documentation current
5. **Progress Tracking**: Update tracker regularly

### Agent Coordination
1. **Clear Communication**: Agents share context and decisions
2. **Evidence-Based**: All decisions backed by research
3. **Iterative Improvement**: Learn from each phase cycle
4. **Quality Focus**: Never compromise quality for speed
5. **Systematic Approach**: Follow established workflows

### Phase Management
1. **Prerequisites Check**: Validate before starting each phase
2. **Task Granularity**: Ensure tasks are appropriately sized
3. **Acceptance Criteria**: Define clear success metrics
4. **Dependency Management**: Handle cross-phase dependencies
5. **Progress Monitoring**: Track completion and quality metrics

## Success Metrics

A successful phase execution includes:
- **Task Completion**: All phase tasks marked complete
- **Quality Validation**: All acceptance criteria met
- **Tracker Updates**: Phase tracker accurately reflects status
- **Code Quality**: Implementation meets established standards
- **Documentation**: Required documentation updated
- **Handoff Ready**: Next phase can proceed without blockers

---

*This command executes phased implementation plans systematically. Use m-explore to generate the required phase structure first.*